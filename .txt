 npx tsx script.ts


 /**
 * CREATE TABLE roles(
 * id SERIAL PRIMARY KEY,
 * name VARCHAR(50) UNIQUE NOT NULL,
 * created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
 * );
 * CREATE TABLE users (
 * id SERIAL PRIMARY KEY,
 * username VARCHAR(50) UNIQUE NOT NULL,
 * email VARCHAR(100) UNIQUE NOT NULL,
 * password_hash VARCHAR(255) NOT NULL,
 * role VARCHAR(50) NOT NULL,
 * created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
 * FOREIGN KEY (role) REFERENCES roles (id) ON DELETE CASCADE
 * );
 * CREATE TABLE discussions (
 * id SERIAL PRIMARY KEY,
 * user1_id INT NOT NULL,
 * user2_id INT NOT NULL,
 * created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 * FOREIGN KEY (user1_id) REFERENCES users (id) ON DELETE CASCADE,
 * FOREIGN KEY (user2_id) REFERENCES users (id) ON DELETE CASCADE,
 * UNIQUE (user1_id, user2_id)
 * );
 * CREATE TABLE messages (
 * id SERIAL PRIMARY KEY,
 * discussion_id INT NOT NULL,
 * sender_id INT NOT NULL,
 * content TEXT,
 * media_type VARCHAR(50), -- e.g. 'image', 'video', 'text', etc.
 * media_url VARCHAR(255),
 * created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 * FOREIGN KEY (discussion_id) REFERENCES discussions (id) ON DELETE CASCADE,
 * FOREIGN KEY (sender_id) REFERENCES users (id) ON DELETE CASCADE
 * );
 */

model Role{
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  users     User[]
}
model User {
  id                 Int          @id @default(autoincrement())
  name               String
  surname            String
  username           String       @unique
  email              String       @unique
  passwordHash       String
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
  roleId             Int
  role               Role         @relation(fields: [roleId], references: [id])
  discussionsAsUser1 Discussion[] @relation("User1Discussions")
  discussionsAsUser2 Discussion[] @relation("User2Discussions")
  messages           Message[]
}

model Discussion {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  user1     User      @relation("User1Discussions", fields: [user1Id], references: [id])
  user2     User      @relation("User2Discussions", fields: [user2Id], references: [id])
  user1Id   Int
  user2Id   Int
  messages  Message[]
}

model Message {
  id           Int      @id @default(autoincrement())
  content      String?
  mediaType    String?
  mediaUrl     String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  discussionId Int
  senderId     Int

  discussion Discussion @relation(fields: [discussionId], references: [id])
  sender     User       @relation(fields: [senderId], references: [id])
}






echo "# connectify" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/Gaetankevin/connectify.git
git push -u origin main