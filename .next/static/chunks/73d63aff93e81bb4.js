(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65420,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(95187),i=(0,l.createServerReference)("60c34110c9b4f198799d0d18a0210875e3b8c51fcf",l.callServer,void 0,l.findSourceMapURL,"login"),n=e.i(96410);let r=[{key:"username_email",label:"Nom d'utilisateur ou email",placeholder:"Nom d'utilisateur ou email"},{key:"password",label:"Mot de passe",type:"password",placeholder:"Votre mot de passe"}];function c(){let[e,l,c]=(0,s.useActionState)(i,void 0),o=(0,a.useRouter)();(0,s.useEffect)(()=>{if(e&&e.redirectTo){let t=e.redirectTo;t&&o.push(t)}},[e,o]);let[d,u]=(0,s.useState)(0),[m,p]=(0,s.useState)({username_email:"",password:""}),[x,h]=(0,s.useState)(null),y=r[d];async function g(e,t){h(null);try{let s=n.LoginFormSchema.shape[e];if(!s)return!0;return s.parse(t),!0}catch(e){return e?.issues&&Array.isArray(e.issues)?h(e.issues.map(e=>e.message).join(" ")):h(e.message||"Valeur invalide"),!1}}async function b(){let e=m[y.key];await g(y.key,e)&&u(e=>Math.min(e+1,r.length-1))}return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h1",{className:"text-center text-2xl font-bold mb-4",children:"Se connecter"}),(0,t.jsxs)("form",{action:l,method:"post",className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 justify-center",children:r.map((e,s)=>(0,t.jsx)("div",{className:`h-2 w-8 rounded ${s<=d?"bg-indigo-600":"bg-gray-200"}`},e.key))}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:y.label}),(0,t.jsx)("input",{autoFocus:!0,name:y.key,value:m[y.key],onChange:function(e){let t=e.target.value;p(e=>({...e,[y.key]:t})),h(null)},type:y.type??"text",placeholder:y.placeholder,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),x&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-2",children:x})]}),Object.entries(m).map(([e,s])=>(0,t.jsx)("input",{type:"hidden",name:e,value:s},e)),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("button",{type:"button",onClick:function(){h(null),u(e=>Math.max(0,e-1))},disabled:0===d,className:"px-4 py-2 rounded-lg border disabled:opacity-50",children:"Retour"}),d<r.length-1?(0,t.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:"Suivant"}):(0,t.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:c?"Connexion...":"Se connecter"})]}),e?.message&&(0,t.jsx)("p",{className:"text-green-600",children:e.message}),e?.errors&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:Object.entries(e.errors).map(([e,s])=>(0,t.jsxs)("p",{children:[e,": ",Array.isArray(s)?s.join(", "):s]},e))})]})]})})}e.s(["default",()=>c],65420)}]);